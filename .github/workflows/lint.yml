on: push

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}-lint
  cancel-in-progress: true

jobs:
  lint-php-library:
    name: ğŸ§ª Lint php-library
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ•°ï¸ Set timezone Europe/Amsterdam
      run: |
        sudo timedatectl set-timezone Europe/Amsterdam

    - name: ğŸ“¥ Checkout
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: ğŸ’¿ Setup Kubectl
      uses: azure/setup-kubectl@v4
    - name: ğŸ’¿ Setup Helm
      uses: azure/setup-helm@v4
      with:
        version: latest

    - name: ğŸ§ª Lint php-library
      run: |
        helm lint php-library --strict --with-subcharts
